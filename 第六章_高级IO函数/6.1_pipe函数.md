## 6.1 pipe函数

**定义:**
``````C++
#include<unistd.h>
int pipe(int fd[2]);
```````

**功能:**
pipe函数用于创建管道,以实现进行间通信

**参数:**
fd: 将一堆打开的文件描述符存放至fd指向的数组中
返回值: 成功返回0,失败返回-1 并设置errno

**详细说明:**
1. 通过pipe函数创建的这两个文件描述符fd[0]和fd[1]分别构成管道的两段,fd[0]只能用于读数据,fd[1]只能用于写数据,如果要实现双向通信,应该创建两个管道
2. 这一对文件描述符默认阻塞,若使用read调用读取空管道,则read被阻塞。若使用write调用写入满管道,则write被阻塞。
3. 若fd[1]的文件描述符引用计数为0,则表示没有任何进程要想该管道写入数据,此时read调用返回0;
4. 若fd[0]的文件描述符引用计数减少至0,则表示没有任何进程读取该管道数据,此时若调用write向该管道写入数据将失败,并引发SIGPIPE信号
5. 管道内部传输的数据是字节流，这和TCP字节流的概念相同。而管道本身拥有一个容量限制，它规定如果应用程序不将数据从管道读走的话，该管道最多能被写入多少字节的数据。我们可以使用fcntl函数来修改管道容量
6. socket接口提供了一个创建双向管道的函数。
``````C++
#include<sys/socket.h>
#include<sys/types.h>
int socketpair(int domain,int type,int protocol,int fd[2]);
``````

**参数:**
* domain:协议族,这里只能使用UNIX本地域协议族PF_UNIX
* 返回值: 成功返回0,失败返回-1 并设置errno

