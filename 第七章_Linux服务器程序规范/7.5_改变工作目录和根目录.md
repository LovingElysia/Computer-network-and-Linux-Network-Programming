## 7.5 改变工作目录和根目录
有些服务器程序还需要改变工作目录和根目录，比如Web服务器。一般来说，Web服务器的逻辑根目录并非文件系统的根目录“/”，而是站点的根目录（对于Linux的Web服务来说，该目录一是/var/www/）。

**获取进程当前工作目录和改变进程工作目录的函数分别是：**
``````C++
#include <unistd.h>
char *getcwd(char *buf, size_t size);
int chdir(const char *path);
```````
**参数:**
* buf: 该参数指向的内存用于存储当前工作目录的绝对路径名
* size: buf指向的内存的大小。
* path: 指定要切换到的目标目录

**getcwd返回值:**
* 若当前工作目录的绝对路径名长度超过size,则返回NULL,并设置errno为ERANGE。
* 如果buf为NULL,并且size非0,则getcwd内部会使用malloc动态分配内存,并将工作目录的绝对路径名存入其中,此时返回指向目标存储区的指针。并且这块内存需要手动释放
* 成功返回指向目标存储区的指针,失败返回NULL并设置errno

**chdir返回值:**
* 成功返回0,失败返回-1并设置errno

**改变根目录的函数定义如下:**
``````C++
#include <unistd.h>
int chroot(const char *path);
``````

**返回值:**
* 成功返回0,失败返回-1并设置errno

**注:**
* chroot并不改变当前进程的工作目录。因此还需执行chdir("/")来将工作目录切换至新的根目录
* 切换根目录后,进程可能无法访问类似/dev的文件。但原先打开的文件描述符皆有效,，所以我们
可以利用这些早先打开的文件描述符来访问调用chroot之后不能直接访问的文件（和目录），尤其是一些日志文件
* 只有特权用户才能切换根目录